<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload a file</title>
    <link rel="icon" type="image/x-icon" href="/assets/img/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/dark-theme.css">
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <h3>Moment.js Vuln Lab</h3>
        <h6><span class="text-muted">Ain't nobody got time for that!</span></h6>
        <a class="nav-link" href="/home">Home</a> |
        <a class="nav-link" href="/upload">Upload</a> |
        <a class="nav-link" href="/uploads">Uploads</a> |
        <a class="nav-link" href="/moment">Moment</a>
    </div>
</nav>

<!-- Main Content -->
<div class="container mt-4">
    <div class="card mt-3">
        <div class="card-body">
            <h4 class="card-title">Upload a file:</h4>
            <form action="/upload" method="POST" enctype="multipart/form-data" class="mb-3">
                <div class="mb-3 dark-div">
                    <input type="file" class="form-control dark-div" name="fileInput" />
                </div>
                <button type="submit" class="btn btn-primary">Upload</button>
            </form><br>
            <p class="card-text">File uploaded: <a href="#" id="fileLink"></a></p>
            <p class="card-text">View all <a href="/uploads">uploaded files</a></p>
        </div>
    </div>
</div>

<script>
    const fileUrl = new URL(window.location.href);
    const filename = fileUrl.searchParams.get('filename');
    const fileLink = document.getElementById('fileLink');
    if (filename) {
        fileLink.href = `/uploads/${filename}`;
        fileLink.textContent = filename;
        fileLink.parentNode.style.display = 'block'; // Display the file link container
    } else {
        fileLink.parentNode.style.display = 'none'; // Hide the file link container
    }
</script>

<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
</body>
</html>
